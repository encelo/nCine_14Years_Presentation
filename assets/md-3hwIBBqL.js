import{_ as n}from"./slidev/CodeBlockWrapper.vue_vue_type_script_setup_true_lang-Dk2eK6Zq.js";import{b as r,o as p,w as a,g as i,C as s,e as d,m as g,v as A,x as o,D as t}from"./modules/vue-DVoBR_Gt.js";import{I as y}from"./slidev/default-hbptgzU_.js";import{u as c,f as B}from"./slidev/context-MNQvXT2D.js";import"./modules/unplugin-icons-C1_kl-kH.js";import"./index-DezL4xne.js";import"./modules/shiki-BFBYwPGf.js";const b={__name:"nCine.md__slidev_50",setup(D){const{$clicksContext:h,$frontmatter:k}=c();return h.setup(),(C,l)=>{const e=n;return p(),r(y,A(o(t(B)(t(k),49))),{default:a(()=>[l[2]||(l[2]=i("h2",null,"ðŸ’Š 2020 - Custom Allocators (3/3)",-1)),l[3]||(l[3]=i("ul",null,[i("li",null,[s("Using placement "),i("code",null,"new"),s(" to put the "),i("code",null,"FreeListAllocator"),s(" class instance in the "),i("code",null,"freelistAllocatorBuffer"),i("ul",null,[i("li",null,"We canâ€™t allocate memory for an instance of our allocator ðŸ”„"),i("li",null,"A rare example where the destructor needs to be called explicitly")])])],-1)),i("figure",null,[d(e,g({},{title:"",ranges:[]}),{default:a(()=>l[0]||(l[0]=[i("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"#"),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"define"),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}}," FREELIST_BUFFER"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}}," ("),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"16777216"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},")"),i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}}," // 16 MB")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"static"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}}," const"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}}," unsigned"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}}," int"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," FreeListSize "),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"="),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," FREELIST_BUFFER"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"alignas"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"("),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"IAllocator"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"::"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"DefaultAlignment"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},")"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}}," static"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}}," uint8_t"),i("span",{style:{"--shiki-dark":"#BD976A","--shiki-light":"#B07D48"}}," freelistMemory"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"["),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"FreeListSize"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"alignas"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"("),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"IAllocator"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"::"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"DefaultAlignment"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},")"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}}," static"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}}," uint8_t"),i("span",{style:{"--shiki-dark":"#BD976A","--shiki-light":"#B07D48"}}," freelistAllocatorBuffer"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"["),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"sizeof"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"("),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"FreeListAllocator"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},")];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"static"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," FreeListAllocator "),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"&"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"freelistAllocator "),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"="),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}}," reinterpret_cast<"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"FreeListAllocator "),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"&>"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"("),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"freelistAllocatorBuffer"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"AllocManager"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"::"),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"AllocManager"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"    // ...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"    new"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}}," ("),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"&"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"freelistAllocator"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},")"),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}}," FreeListAllocator"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"("),i("span",{style:{"--shiki-dark":"#C98A7D77","--shiki-light":"#B5695977"}},'"'),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},"Default"),i("span",{style:{"--shiki-dark":"#C98A7D77","--shiki-light":"#B5695977"}},'"'),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},","),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," FreeListSize"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},","),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," freelistMemory"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},");"),i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}}," // placement new")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"AllocManager"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"::"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"~"),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"AllocManager"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"    // ...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"    ("),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"&"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"freelistAllocator"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},")->"),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"~FreeListAllocator"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"();"),i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}}," // explicit call of the class destructor")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"}")])])],-1)])),_:1,__:[0]},16),l[1]||(l[1]=i("figcaption",null,[s("Placement "),i("code",null,"new"),s(" in action ("),i("a",{href:"https://github.com/nCine/nCine/blob/master/src/base/AllocManager.cpp"},[i("code",null,"src/base/AllocManager.cpp"),s(" ðŸ”—")]),s(")")],-1))])]),_:1,__:[2,3]},16)}}};export{b as default};
